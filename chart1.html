<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> circle {fill: lightblue; stroke: black;} </style>
<body onload="init()">
<div style="margin-top:5px">
<div style="margin-left:30px; width:300px; height:100%; float:left">
<h2>Lung and Bronchus Cancer Rates: 1975-2016</h2>
<p>Here in the right is a figure showing the trend of lung and bronchus cancer from year 1975 to 2016. It displays the incidents rates of each year, in terms of No. of incidents per 100'000 people.</p>
<p>We can see that there is a trend of growth with lung and bronchus cancer incident rate from 1975 to 1990, and then gradually drops after 1990.</p>
<p>What is the reason behind the change? What makes the drop of lung/bronchus cancer rate? Click <b>"Next"</b> for more info.</p>	
</div>
<div style="margin-left:30px; height:100%; float:left">
<svg width=300 height=300>
</svg>
<script>
async function init() {
var margin = 50;
var int_width = 200;
var int_height = 200;
var cx = d3.scaleLog().domain([10,150]).range([0,int_width]);
var cy = d3.scaleLog().domain([10,150]).range([int_height,0]);
const data = await d3.csv("https://flunky.github.io/cars2017.csv");
d3.select("svg")
.append("g")
.attr("transform", "translate("+margin+","+margin+")")
.selectAll("circle")
.data(data)
.enter()
.append("circle")
.attr("cx", function(d,i) {return cx(d.AverageCityMPG);})
.attr("cy", function(d,i) {return cy(d.AverageHighwayMPG);})
.attr("r", function(d) {return parseInt(d.EngineCylinders)+2;});

d3.select("svg")
.append("g")
.attr("transform", "translate("+margin+","+margin+")")
.call(d3.axisLeft(cy).tickValues([10,20,50,100]).tickFormat(d3.format("~s")));

d3.select("svg")
.append("g")
.attr("transform", "translate("+margin+","+(margin+int_height)+")")
.call(d3.axisBottom(cx).tickValues([10,20,50,100]).tickFormat(d3.format("~s")));
}
</script>
</div>
</div>
</body>
</html>	